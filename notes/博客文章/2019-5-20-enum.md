---
layout: post
title: "后台页面状态展示"
date: 2019-5-20 21:15:06 
description: "好用的枚举"
tag: SpringBoot
---
遇到一个业务场景是这样的，在后台系统的页面上展示订单状态和支付状态。这里的订单状态分为新订单、完结订单和取消订单。支付状态分为等待支付和支付成功。
![页面](../images/1574337996440.png)
通常的做法是在后台写 if 语句进行判断展示。但是如果业务量变得庞大，有许多的枚举进行判断。那我们不要写死 <i class="fas fa-hiking"></i>。
这里给出一种相对完美的解决方案。
首先看我们的枚举。
订单状态
```java
@Getter // 这里使用了 lombok
public enum OrderStatusEnum {
    NEW(0,"新订单"),
    FINISHED(1,"完结"),
    CANCEL(2,"已取消")
    ;
    private Integer code;
    private String message;

    OrderStatusEnum(Integer code, String message) {
        this.code = code;
        this.message = message;
    }
}
```
支付状态
```java
@Getter
public enum PayStatusEnum {
    WAIT(0,"等待支付"),
    SUCCESS(1,"支付成功"),
    ;
    private Integer code;
    private String message;

    PayStatusEnum(Integer code, String message) {
        this.code = code;
        this.message = message;
    }
}
```
#### 升级步骤一
在 OrderDTO 数据传输对象中，添加两个方法
```java
    @JsonIgnore // 对象转成 json 忽略这个方法
    public OrderStatusEnum getOrderStatusEnum() {
        return EnumUtil.getByCode(orderStatus, OrderStatusEnum.class);
    }

    @JsonIgnore
    public PayStatusEnum getPayStatusEnum() {
        return EnumUtil.getByCode(payStatus, PayStatusEnum.class);
    }
```
写一个公共的接口，让 OrderStatusEnum 和 PayStatusEnum 实现这个接口
```java
public interface CodeEnum {
    /**
     * 获取 code
     * @return
     */
    Integer getCode();
}
```
写一个EnumUtil 用来获取 code
```java
/**
 * @author sixkery
 * @date 2018/4/21
 */
public class EnumUtil {
    public static <T extends CodeEnum> T getByCode(Integer code, Class<T> enumClass) {
        for (T each : enumClass.getEnumConstants()) {
            if (code.equals(each.getCode())) {
                return each;
            }
        }
        return null;
    }
}

```

